var e,t,s,a,r,i,o,n,l=e=>{throw TypeError(e)},d=(e,t,s)=>t.has(e)||l("Cannot "+s),c=(e,t,s)=>(d(e,t,"read from private field"),s?s.call(e):t.get(e)),m=(e,t,s)=>t.has(e)?l("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),x=(e,t,s,a)=>(d(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),p=(e,t,s)=>(d(e,t,"access private method"),s);import{ab as h,ac as u,ad as g,ae as y,af as b,ag as j,r as v,ah as f,ai as k,n as w,o as C,p as S,q as T,s as z,j as M,t as R,v as A,w as _,D as $,aj as I,ak as N,al as W,x as F,B as H,i as O,am as D,T as P,J as E,C as L,Z as B,E as U,$ as Y,y as G,an as J,I as K,A as Q,z as V,X,m as q,a as Z,ao as ee,a4 as te,W as se,P as ae,l as re,f as ie,ap as oe}from"./index-ElRkoE7H.js";import{P as ne,C as le,A as de,p as ce,a as me,b as xe,L as pe,c as he,d as ue,e as ge,f as ye,i as be}from"./index-DygyF2-3.js";import{u as je,E as ve,G as fe,B as ke,a as we,g as Ce,S as Se,b as Te,c as ze}from"./useAnalysisProgress-DNHh7tQu.js";import{T as Me,a as Re}from"./Tabs-CJWctcvf.js";import{T as Ae}from"./Tooltip-Dfd2uGR6.js";import{L as _e}from"./LinearProgress-DFy9WXl8.js";import{C as $e}from"./Collapse-DsgXf-Fe.js";import{C as Ie}from"./CardContent-pA9q4iIg.js";import{G as Ne}from"./Grid-fyuf3ZOW.js";import{T as We}from"./TextField-CuVneWw0.js";import"./Zoom-Q1JIgiGM.js";import"./useControlled-DkdrZMW3.js";import"./Card-BQ_SP2w_.js";import"./FormControl-CTkNbEnO.js";var Fe=(n=class extends h{constructor(o,n){super(),m(this,r),m(this,e),m(this,t),m(this,s),m(this,a),x(this,e,o),this.setOptions(n),this.bindMethods(),p(this,r,i).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var a;const r=this.options;this.options=c(this,e).defaultMutationOptions(t),u(this.options,r)||c(this,e).getMutationCache().notify({type:"observerOptionsUpdated",mutation:c(this,s),observer:this}),(null==r?void 0:r.mutationKey)&&this.options.mutationKey&&g(r.mutationKey)!==g(this.options.mutationKey)?this.reset():"pending"===(null==(a=c(this,s))?void 0:a.state.status)&&c(this,s).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||null==(e=c(this,s))||e.removeObserver(this)}onMutationUpdate(e){p(this,r,i).call(this),p(this,r,o).call(this,e)}getCurrentResult(){return c(this,t)}reset(){var e;null==(e=c(this,s))||e.removeObserver(this),x(this,s,void 0),p(this,r,i).call(this),p(this,r,o).call(this)}mutate(t,r){var i;return x(this,a,r),null==(i=c(this,s))||i.removeObserver(this),x(this,s,c(this,e).getMutationCache().build(c(this,e),this.options)),c(this,s).addObserver(this),c(this,s).execute(t)}},e=new WeakMap,t=new WeakMap,s=new WeakMap,a=new WeakMap,r=new WeakSet,i=function(){var e;const a=(null==(e=c(this,s))?void 0:e.state)??y();x(this,t,{...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset})},o=function(e){b.batch(()=>{var s,r,i,o,n,l,d,m;if(c(this,a)&&this.hasListeners()){const x=c(this,t).variables,p=c(this,t).context;"success"===(null==e?void 0:e.type)?(null==(r=(s=c(this,a)).onSuccess)||r.call(s,e.data,x,p),null==(o=(i=c(this,a)).onSettled)||o.call(i,e.data,null,x,p)):"error"===(null==e?void 0:e.type)&&(null==(l=(n=c(this,a)).onError)||l.call(n,e.error,x,p),null==(m=(d=c(this,a)).onSettled)||m.call(d,void 0,e.error,x,p))}this.listeners.forEach(e=>{e(c(this,t))})})},n);const He=v.createContext();function Oe(e){return w("MuiTable",e)}C("MuiTable",["root","stickyHeader"]);const De=["className","component","padding","size","stickyHeader"],Pe=R("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>z({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":z({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),Ee="table",Le=v.forwardRef(function(e,t){const s=S({props:e,name:"MuiTable"}),{className:a,component:r=Ee,padding:i="normal",size:o="medium",stickyHeader:n=!1}=s,l=T(s,De),d=z({},s,{component:r,padding:i,size:o,stickyHeader:n}),c=(e=>{const{classes:t,stickyHeader:s}=e;return _({root:["root",s&&"stickyHeader"]},Oe,t)})(d),m=v.useMemo(()=>({padding:i,size:o,stickyHeader:n}),[i,o,n]);return M.jsx(He.Provider,{value:m,children:M.jsx(Pe,z({as:r,role:r===Ee?null:"table",ref:t,className:A(c.root,a),ownerState:d},l))})}),Be=v.createContext();function Ue(e){return w("MuiTableBody",e)}C("MuiTableBody",["root"]);const Ye=["className","component"],Ge=R("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),Je={variant:"body"},Ke="tbody",Qe=v.forwardRef(function(e,t){const s=S({props:e,name:"MuiTableBody"}),{className:a,component:r=Ke}=s,i=T(s,Ye),o=z({},s,{component:r}),n=(e=>{const{classes:t}=e;return _({root:["root"]},Ue,t)})(o);return M.jsx(Be.Provider,{value:Je,children:M.jsx(Ge,z({className:A(n.root,a),as:r,ref:t,role:r===Ke?null:"rowgroup",ownerState:o},i))})});function Ve(e){return w("MuiTableCell",e)}const Xe=C("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),qe=["align","className","component","padding","scope","size","sortDirection","variant"],Ze=R("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t[`size${$(s.size)}`],"normal"!==s.padding&&t[`padding${$(s.padding)}`],"inherit"!==s.align&&t[`align${$(s.align)}`],s.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>z({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid\n    ${"light"===e.palette.mode?I(W(e.palette.divider,1),.88):N(W(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},"head"===t.variant&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},"body"===t.variant&&{color:(e.vars||e).palette.text.primary},"footer"===t.variant&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},"small"===t.size&&{padding:"6px 16px",[`&.${Xe.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===t.padding&&{width:48,padding:"0 0 0 4px"},"none"===t.padding&&{padding:0},"left"===t.align&&{textAlign:"left"},"center"===t.align&&{textAlign:"center"},"right"===t.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===t.align&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),et=v.forwardRef(function(e,t){const s=S({props:e,name:"MuiTableCell"}),{align:a="inherit",className:r,component:i,padding:o,scope:n,size:l,sortDirection:d,variant:c}=s,m=T(s,qe),x=v.useContext(He),p=v.useContext(Be),h=p&&"head"===p.variant;let u;u=i||(h?"th":"td");let g=n;"td"===u?g=void 0:!g&&h&&(g="col");const y=c||p&&p.variant,b=z({},s,{align:a,component:u,padding:o||(x&&x.padding?x.padding:"normal"),size:l||(x&&x.size?x.size:"medium"),sortDirection:d,stickyHeader:"head"===y&&x&&x.stickyHeader,variant:y}),j=(e=>{const{classes:t,variant:s,align:a,padding:r,size:i,stickyHeader:o}=e,n={root:["root",s,o&&"stickyHeader","inherit"!==a&&`align${$(a)}`,"normal"!==r&&`padding${$(r)}`,`size${$(i)}`]};return _(n,Ve,t)})(b);let f=null;return d&&(f="asc"===d?"ascending":"descending"),M.jsx(Ze,z({as:u,ref:t,className:A(j.root,r),"aria-sort":f,scope:g,ownerState:b},m))});function tt(e){return w("MuiTableContainer",e)}C("MuiTableContainer",["root"]);const st=["className","component"],at=R("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),rt=v.forwardRef(function(e,t){const s=S({props:e,name:"MuiTableContainer"}),{className:a,component:r="div"}=s,i=T(s,st),o=z({},s,{component:r}),n=(e=>{const{classes:t}=e;return _({root:["root"]},tt,t)})(o);return M.jsx(at,z({ref:t,as:r,className:A(n.root,a),ownerState:o},i))});function it(e){return w("MuiTableHead",e)}C("MuiTableHead",["root"]);const ot=["className","component"],nt=R("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),lt={variant:"head"},dt="thead",ct=v.forwardRef(function(e,t){const s=S({props:e,name:"MuiTableHead"}),{className:a,component:r=dt}=s,i=T(s,ot),o=z({},s,{component:r}),n=(e=>{const{classes:t}=e;return _({root:["root"]},it,t)})(o);return M.jsx(Be.Provider,{value:lt,children:M.jsx(nt,z({as:r,className:A(n.root,a),ref:t,role:r===dt?null:"rowgroup",ownerState:o},i))})});function mt(e){return w("MuiTableRow",e)}const xt=C("MuiTableRow",["root","selected","hover","head","footer"]),pt=["className","component","hover","selected"],ht=R("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.head&&t.head,s.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${xt.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${xt.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:W(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:W(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),ut="tr",gt=v.forwardRef(function(e,t){const s=S({props:e,name:"MuiTableRow"}),{className:a,component:r=ut,hover:i=!1,selected:o=!1}=s,n=T(s,pt),l=v.useContext(Be),d=z({},s,{component:r,hover:i,selected:o,head:l&&"head"===l.variant,footer:l&&"footer"===l.variant}),c=(e=>{const{classes:t,selected:s,hover:a,head:r,footer:i}=e;return _({root:["root",s&&"selected",a&&"hover",r&&"head",i&&"footer"]},mt,t)})(d);return M.jsx(ht,z({as:r,ref:t,className:A(c.root,a),role:r===ut?null:"row",ownerState:d},n))});le.register(de,ce,me,xe);const yt=({data:e})=>{const t=F(),s={labels:e.map(e=>e.name),datasets:[{data:e.map(e=>e.value),backgroundColor:e.map(e=>e.color),borderColor:t.palette.background.paper,borderWidth:2}]},a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:t.palette.text.primary,boxWidth:20,padding:20}},title:{display:!0,text:"Mental State Distribution",color:t.palette.text.primary,font:{size:16}},tooltip:{callbacks:{label:function(e){let t=e.dataset.label||"";return t&&(t+=": "),null!==e.parsed&&(t+=`${e.label}: ${e.raw}%`),t}}}}};return M.jsx(H,{sx:{height:350,width:"100%"},children:M.jsx(ne,{data:s,options:a})})};le.register(he,ue,ge,ye,xe,ce,me,be);const bt=({data:e})=>{const t=F(),s=e.filter(e=>{const t=new Date(e.fullTimestamp||e.timestamp);return!isNaN(t.getTime())&&"number"==typeof e.sentiment&&!isNaN(e.sentiment)}),a=s.length>1&&s.every(e=>e.sentiment===s[0].sentiment),r=0===s.length,i={labels:s.map(e=>{const t=new Date(e.fullTimestamp||e.timestamp);return isNaN(t.getTime())?"-":t.toLocaleString()}),datasets:[{label:"Sentiment Trend",data:s.map(e=>e.sentiment),fill:!0,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",tension:.4}]};if(r||0===s.length)return M.jsx(H,{sx:{height:350,width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:M.jsx("span",{children:"No valid sentiment trend data to display."})});if(a)return M.jsx(H,{sx:{height:350,width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:M.jsx("span",{children:"Sentiment did not change over time."})});const o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Sentiment Over Time",color:t.palette.text.primary,font:{size:16}},tooltip:{callbacks:{label:function(e){return`Sentiment: ${s[e.dataIndex].sentiment.toFixed(1)}%`},afterLabel:function(e){const t=s[e.dataIndex];return t.text?`Text: "${t.text}"`:""}}}},scales:{y:{min:0,max:100,ticks:{color:t.palette.text.secondary,callback:function(e){return e+"%"}},grid:{color:t.palette.divider}},x:{ticks:{color:t.palette.text.secondary},grid:{color:t.palette.divider}}}};return M.jsx(H,{sx:{height:350,width:"100%"},children:M.jsx(pe,{data:i,options:o})})},jt=[{text:"I'm feeling great today! 😊",category:"positive"},{text:"This is really frustrating me 😤",category:"negative"},{text:"I'm not sure how I feel about this...",category:"neutral"},{text:"I'm so excited about the new project! 🎉",category:"positive"},{text:"I'm stressed about the deadline",category:"negative"},{text:"Working from home has been challenging",category:"neutral"},{text:"The team meeting went really well today",category:"positive"},{text:"I feel overwhelmed with my workload",category:"negative"}],vt=()=>{const{showSuccess:e,showError:t}=O(),s=function(e){const t=j(),[s]=v.useState(()=>new Fe(t,e));v.useEffect(()=>{s.setOptions(e)},[s,e]);const a=v.useSyncExternalStore(v.useCallback(e=>s.subscribe(b.batchCalls(e)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),r=v.useCallback((e,t)=>{s.mutate(e,t).catch(f)},[s]);if(a.error&&k(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:r,mutateAsync:a.mutate}}({mutationFn:e=>D(e),onSuccess:()=>{e("File analyzed successfully!")},onError:e=>{t(e.message||"Failed to analyze file.")}});return{analyzeFile:s.mutate,data:s.data,isLoading:s.isPending,error:s.error,clearData:s.reset}},ft=R(We)(({theme:e})=>({"& .MuiOutlinedInput-root":{borderRadius:"20px",transition:"all 0.3s ease",background:e.palette.background.paper,"&:hover":{transform:"translateY(-2px)",boxShadow:e.shadows[4]},"&.Mui-focused":{transform:"translateY(-4px)",boxShadow:e.shadows[8],"& fieldset":{borderColor:e.palette.primary.main,borderWidth:"2px"}}}})),kt=()=>{var e,t,s,a;const r=F(),[i,o]=v.useState("simple"),[n,l]=v.useState(!1),d=v.useRef(null),[c,m]=v.useState(!1),[x,p]=v.useState(null),[h,u]=v.useState([]),[g,y]=v.useState(null),{text:b,charCount:j,wordCount:f,handleTextChange:k,setText:w}=(()=>{const[e,t]=v.useState(""),[s,a]=v.useState(0),[r,i]=v.useState(0);return{text:e,charCount:s,wordCount:r,handleTextChange:v.useCallback(e=>{const s=e.target.value;t(s),a(s.length),i(s.trim().split(/\s+/).filter(e=>e.length>0).length)},[]),clearText:v.useCallback(()=>{t(""),a(0),i(0)},[]),setText:t}})(),{data:C,isLoading:S,error:T,analyzeFile:z,clearData:R}=vt(),{progress:A,isLoading:_,startProgress:$,completeProgress:I}=je(),{showSuccess:N}=O(),W=e=>{w(e),l(!1)},D=v.useCallback((e,t)=>{o(t),p(null),R(),y(null)},[R]);return M.jsxs(H,{sx:{maxWidth:1200,mx:"auto",p:3},children:[M.jsxs(H,{sx:{textAlign:"center",mb:4,opacity:0,animation:"slideInDown 0.8s ease-out forwards","@keyframes slideInDown":{"0%":{opacity:0,transform:"translateY(-30px)"},"100%":{opacity:1,transform:"translateY(0)"}}},children:[M.jsx(P,{variant:"h3",component:"h1",sx:{fontWeight:700,mb:2,background:`linear-gradient(45deg, ${r.palette.primary.main}, ${r.palette.secondary.main})`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"💬 Smart Chat Analysis"}),M.jsx(P,{variant:"h6",color:"text.secondary",sx:{mb:3},children:"Discover emotions, sentiment, and mental states in your conversations"}),M.jsxs(E,{direction:"row",spacing:2,justifyContent:"center",sx:{mb:3},children:[M.jsx(L,{icon:M.jsx(B,{}),label:`${h.length} Analyses`,color:"primary",variant:"outlined"}),M.jsx(L,{icon:M.jsx(U,{}),label:"Real-time AI",color:"secondary",variant:"outlined"}),M.jsx(L,{icon:M.jsx(Y,{}),label:"Enhanced UX",color:"success",variant:"outlined"})]})]}),M.jsx(G,{sx:{mb:3},children:M.jsxs(Me,{value:i,onChange:D,variant:"fullWidth",children:[M.jsx(Re,{label:"Single Message",value:"simple",icon:M.jsx(J,{}),iconPosition:"start"}),M.jsx(Re,{label:"Batch Input",value:"batch",icon:M.jsx(B,{}),iconPosition:"start"})]})}),"simple"===i&&M.jsxs(G,{sx:{p:4,mb:3,borderRadius:"20px",boxShadow:4},children:[M.jsxs(P,{variant:"h5",sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[M.jsx(J,{}),"Single Message Analysis"]}),M.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!b.trim())return;const t=$();try{const e=await oe({text:b.trim()});p(e),u(t=>[...t.slice(-4),e]),N("Analysis successful!"),null==(s=d.current)||s.scrollIntoView({behavior:"smooth"})}catch(a){const e={error:a.message,primary_emotion:"",sentiment_score:0,mental_state:""};p(e)}finally{I(t)}var s},children:[M.jsxs(H,{sx:{mb:4},children:[M.jsx(ft,{fullWidth:!0,multiline:!0,rows:4,label:"Enter your message for analysis",placeholder:"Type your message here... 💭",value:b,onChange:k,variant:"outlined",sx:{mb:2},InputProps:{endAdornment:M.jsx(H,{sx:{display:"flex",alignItems:"center",gap:1},children:M.jsx(Ae,{title:"Quick Templates",children:M.jsx(K,{onClick:()=>l(!n),children:M.jsx(Q,{})})})})}}),M.jsxs(E,{direction:"row",spacing:2,sx:{mb:2},children:[M.jsx(L,{label:`${j} characters`,size:"small",color:j>280?"warning":"default"}),M.jsx(L,{label:`${f} words`,size:"small",color:"primary"}),M.jsx(L,{label:c?"Real-time ON":"Real-time OFF",size:"small",color:c?"success":"default",onClick:()=>m(!c),sx:{cursor:"pointer"}})]}),A>0&&M.jsx(V,{in:!0,children:M.jsxs(H,{sx:{mb:2},children:[M.jsx(_e,{variant:"determinate",value:A,sx:{height:8,borderRadius:4,"& .MuiLinearProgress-bar":{borderRadius:4,background:`linear-gradient(45deg, ${r.palette.primary.main}, ${r.palette.secondary.main})`}}}),M.jsxs(P,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:["Analyzing... ",A.toFixed(0),"%"]})]})}),M.jsx($e,{in:n,children:M.jsxs(ve,{interactive:!1,sx:{p:2,mb:2,bgcolor:"background.default"},children:[M.jsx(P,{variant:"subtitle2",sx:{mb:2,fontWeight:"bold"},children:"💡 Quick Message Templates"}),M.jsx(E,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:jt.map((e,t)=>M.jsx(L,{label:e.text,onClick:()=>W(e.text),color:"positive"===e.category?"success":"negative"===e.category?"error":"default",variant:"outlined",sx:{mb:1,cursor:"pointer","&:hover":{transform:"scale(1.05)",boxShadow:2}}},t))})]})})]}),M.jsx(H,{sx:{textAlign:"center",mb:3},children:M.jsx(fe,{type:"submit",loading:_,loadingText:"Analyzing Magic...",disabled:!b.trim(),size:"large",startIcon:M.jsx(X,{}),children:"Analyze Message ✨"})})]}),x&&(e=>{if(e.error)return M.jsx(V,{in:!0,timeout:500,children:M.jsxs(q,{severity:"error",sx:{borderRadius:"15px",mb:2},children:[M.jsx(P,{variant:"h6",children:"Analysis Failed"}),M.jsx(P,{children:e.error})]})});const t=Ce(e.primary_emotion,"dark"===r.palette.mode),s=(e.sentiment_score+1)/2*100;return M.jsx(V,{in:!0,timeout:800,children:M.jsxs(Ne,{container:!0,spacing:3,sx:{mt:2},children:[M.jsx(Ne,{item:!0,xs:12,md:4,children:M.jsx(ve,{children:M.jsxs(Ie,{sx:{textAlign:"center",p:3},children:[M.jsx(ie,{sx:{width:80,height:80,mx:"auto",mb:2,fontSize:"2rem",bgcolor:t.color},children:t.emoji}),M.jsx(P,{variant:"h5",sx:{fontWeight:"bold",mb:1},children:e.primary_emotion.charAt(0).toUpperCase()+e.primary_emotion.slice(1)}),M.jsx(P,{variant:"body2",color:"text.secondary",children:t.description}),M.jsx(L,{label:`${(100*(e.emotion_score||0)).toFixed(1)}% confidence`,color:"primary",sx:{mt:1}})]})})}),M.jsx(Ne,{item:!0,xs:12,md:4,children:M.jsx(ve,{children:M.jsxs(Ie,{sx:{textAlign:"center",p:3},children:[M.jsxs(H,{sx:{position:"relative",display:"inline-flex",mb:2},children:[M.jsx(se,{variant:"determinate",value:s,size:80,thickness:6,sx:{color:s>60?"#4CAF50":s>40?"#FF9800":"#F44336","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),M.jsx(H,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:M.jsxs(P,{variant:"h6",component:"div",color:"text.secondary",children:[s.toFixed(0),"%"]})})]}),M.jsx(P,{variant:"h6",sx:{mb:1},children:"Sentiment Score"}),M.jsx(P,{variant:"body2",color:"text.secondary",children:s>60?"Very Positive":s>40?"Neutral":"Negative"})]})})}),M.jsx(Ne,{item:!0,xs:12,md:4,children:M.jsx(ve,{children:M.jsxs(Ie,{sx:{textAlign:"center",p:3},children:[M.jsx(ie,{sx:{width:80,height:80,mx:"auto",mb:2,background:`linear-gradient(135deg, ${r.palette.secondary.main}, ${r.palette.secondary.dark})`},children:"🧠"}),M.jsx(P,{variant:"h6",sx:{mb:1},children:"Mental State"}),M.jsx(L,{label:e.mental_state,color:"secondary",sx:{fontSize:"1rem",fontWeight:"bold",px:2,py:1}})]})})})]})})})(x),h.length>0&&M.jsx(V,{in:!0,timeout:1e3,children:M.jsxs(H,{sx:{mt:4},children:[M.jsxs(P,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:["📚 Recent Analysis History",M.jsx(ke,{badgeContent:h.length,color:"primary"})]}),M.jsx(E,{spacing:2,children:h.slice(-3).reverse().map((e,t)=>M.jsx(H,{children:M.jsx(ve,{sx:{p:2,bgcolor:"background.default",border:"1px solid",borderColor:"divider",opacity:0,animation:`fadeInUp 0.6s ease-out ${.1*t}s forwards`,"@keyframes fadeInUp":{"0%":{opacity:0,transform:"translateY(20px)"},"100%":{opacity:1,transform:"translateY(0)"}}},children:M.jsxs(E,{direction:"row",spacing:2,alignItems:"center",children:[M.jsx(we,{emotion:e.primary_emotion}),M.jsxs(H,{sx:{flexGrow:1},children:[M.jsxs(P,{variant:"body2",sx:{fontWeight:"bold"},children:[e.primary_emotion," • ",e.mental_state]}),M.jsxs(P,{variant:"caption",color:"text.secondary",children:["Sentiment: ",((e.sentiment_score+1)/2*100).toFixed(0),"%"]})]}),M.jsx(L,{label:"#"+(h.length-t),size:"small",color:"primary"})]})})},"analysis-"+(h.length-t)))})]})}),M.jsx("div",{ref:d})]}),"batch"===i&&M.jsxs(G,{sx:{p:3,maxWidth:1200,mx:"auto"},children:[M.jsxs(P,{variant:"h5",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[M.jsx(B,{}),"Batch Analysis"]}),M.jsx(P,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Upload a JSON file with pre-formatted messages for a comprehensive analysis."}),M.jsxs(H,{children:[M.jsx(P,{variant:"h6",sx:{mb:2},children:"📁 JSON File Upload"}),M.jsx(q,{severity:"info",sx:{mb:3}}),M.jsxs(H,{sx:{mb:3},children:[M.jsx("input",{id:"batch-file-input",type:"file",accept:".json",onChange:e=>{e.target.files&&e.target.files[0]&&(y(e.target.files[0]),R())},style:{display:"none"}}),M.jsx("label",{htmlFor:"batch-file-input",children:M.jsx(Z,{variant:"outlined",component:"span",startIcon:M.jsx(ee,{}),sx:{mb:2},children:"Choose JSON File"})}),g&&M.jsxs(H,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[M.jsxs(P,{variant:"body2",children:[g.name," (",(g.size/1024).toFixed(1)," KB)"]}),M.jsx(Ae,{title:"Remove file",children:M.jsx(K,{size:"small",onClick:()=>{y(null),R()},children:M.jsx(te,{})})})]})]})]}),M.jsx(H,{sx:{mb:3},children:M.jsx(Z,{variant:"contained",onClick:()=>{g&&z(g)},disabled:S||!g,startIcon:S?M.jsx(se,{size:20}):M.jsx(ae,{}),size:"large",children:S?"Analyzing...":"Start Batch Analysis"})}),S&&M.jsxs(H,{sx:{textAlign:"center",py:4},children:[M.jsx(se,{size:60}),M.jsx(P,{variant:"h6",sx:{mt:2},children:"Analyzing your messages..."})]}),T&&M.jsx(q,{severity:"error",sx:{mt:2},children:T.message}),C&&M.jsxs(H,{sx:{mt:3},children:[M.jsx(ve,{sx:{mb:3,bgcolor:"dark"===r.palette.mode?"grey.900":"grey.50",border:`1px solid ${r.palette.divider}`},children:M.jsxs(Ie,{children:[M.jsxs(P,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:["📊 Analysis Summary",M.jsx(L,{label:`${C.summary.total_messages} messages`,color:"primary",size:"small"})]}),M.jsxs(Ne,{container:!0,spacing:2,children:[M.jsxs(Ne,{item:!0,xs:12,sm:6,children:[M.jsx(P,{variant:"subtitle1",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"🧠 Mental State Distribution:"}),Object.entries(C.summary.mental_state_distribution||{}).map(([e,t])=>M.jsxs(P,{variant:"body2",sx:{ml:2,mb:.5,color:"text.secondary"},children:["• ",M.jsxs("strong",{style:{color:r.palette.text.primary},children:[e,":"]})," ",String(t)]},e))]}),M.jsxs(Ne,{item:!0,xs:12,sm:6,children:[M.jsxs(P,{variant:"body1",sx:{mb:1,color:"text.primary"},children:[M.jsx("strong",{children:"💭 Average Sentiment:"})," ",C.summary.average_sentiment]}),M.jsxs(P,{variant:"body1",sx:{mb:1,color:"text.primary"},children:[M.jsx("strong",{children:"😊 Most Common Emotion:"})," ",C.summary.most_common_emotion]}),C.summary.time_span&&M.jsxs(H,{children:[M.jsx(P,{variant:"body2",sx:{mb:.5,color:"text.primary"},children:M.jsx("strong",{children:"⏰ Time Span:"})}),M.jsxs(P,{variant:"body2",sx:{ml:2,fontSize:"0.8rem",color:"text.secondary"},children:["From: ",C.summary.time_span.start]}),M.jsxs(P,{variant:"body2",sx:{ml:2,fontSize:"0.8rem",color:"text.secondary"},children:["To: ",C.summary.time_span.end]})]})]})]}),C.success&&M.jsx(q,{severity:"success",sx:{mt:2,borderRadius:"12px"},children:C.message})]})}),((null==(e=C.mental_states_data)?void 0:e.length)>0||(null==(t=C.sentiment_trend_data)?void 0:t.length)>0)&&M.jsx(ve,{sx:{mb:3,bgcolor:"background.paper",border:`1px solid ${r.palette.divider}`},children:M.jsxs(Ie,{children:[M.jsx(P,{variant:"h6",sx:{mb:2,color:"text.primary"},children:"📈 Interactive Visualizations (React Charts)"}),M.jsxs(Ne,{container:!0,spacing:3,children:[(null==(s=C.mental_states_data)?void 0:s.length)>0&&M.jsx(Ne,{item:!0,xs:12,lg:6,children:M.jsx(yt,{data:C.mental_states_data.filter(e=>{const t=e.name&&"number"==typeof e.value&&!isNaN(e.value)&&e.value>0;return t||console.warn("Invalid mental states data item:",e),t})})}),(null==(a=C.sentiment_trend_data)?void 0:a.length)>0&&M.jsx(Ne,{item:!0,xs:12,lg:6,children:M.jsx(bt,{data:C.sentiment_trend_data.filter(e=>{const t=e.timestamp&&"number"==typeof e.sentiment&&!isNaN(e.sentiment);return t||console.warn("Invalid sentiment trend data item:",e),t})})})]})]})}),Array.isArray(C.analyzed_messages)&&C.analyzed_messages.length>0&&M.jsx(ve,{sx:{bgcolor:"background.paper",border:`1px solid ${r.palette.divider}`},children:M.jsxs(Ie,{children:[M.jsx(P,{variant:"h6",sx:{mb:2,color:"text.primary"},children:"📝 Detailed Message Analysis"}),M.jsx(rt,{component:G,sx:{maxHeight:600,bgcolor:"background.paper",border:`1px solid ${r.palette.divider}`},children:M.jsxs(Le,{stickyHeader:!0,size:"small",children:[M.jsx(ct,{children:M.jsxs(gt,{children:[M.jsx(et,{sx:{bgcolor:"dark"===r.palette.mode?"grey.800":"grey.100",color:"text.primary",fontWeight:"bold"},children:"Timestamp"}),M.jsx(et,{sx:{bgcolor:"dark"===r.palette.mode?"grey.800":"grey.100",color:"text.primary",fontWeight:"bold"},children:"Text"}),M.jsx(et,{sx:{bgcolor:"dark"===r.palette.mode?"grey.800":"grey.100",color:"text.primary",fontWeight:"bold"},children:"Person ID"}),M.jsx(et,{sx:{bgcolor:"dark"===r.palette.mode?"grey.800":"grey.100",color:"text.primary",fontWeight:"bold"},children:"Sentiment"}),M.jsx(et,{sx:{bgcolor:"dark"===r.palette.mode?"grey.800":"grey.100",color:"text.primary",fontWeight:"bold"},children:"Emotion"}),M.jsx(et,{sx:{bgcolor:"dark"===r.palette.mode?"grey.800":"grey.100",color:"text.primary",fontWeight:"bold"},children:"Mental State"})]})}),M.jsx(Qe,{children:C.analyzed_messages.map((e,t)=>{const s=e.sentiment_score??0,a=e.primary_emotion??"neutral",i=Ce(a,"dark"===r.palette.mode);return M.jsxs(gt,{sx:{"&:nth-of-type(odd)":{bgcolor:"dark"===r.palette.mode?"grey.900":"grey.50"},"&:hover":{bgcolor:"dark"===r.palette.mode?"grey.700":"grey.200"}},children:[M.jsx(et,{sx:{fontSize:"0.75rem",color:"text.secondary"},children:e.timestamp}),M.jsx(et,{sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"text.primary"},children:e.text}),M.jsx(et,{sx:{color:"text.primary"},children:e.person_id}),M.jsx(et,{children:M.jsx(L,{label:`${((s+1)/2*100).toFixed(0)}%`,size:"small",color:s>0?"success":s<0?"error":"default",sx:{fontWeight:"bold","&.MuiChip-colorDefault":{bgcolor:"dark"===r.palette.mode?"grey.700":"grey.300",color:"text.primary"}}})}),M.jsx(et,{children:M.jsx(L,{label:a,size:"small",sx:{bgcolor:"dark"===r.palette.mode?`${i.color}40`:i.bgColor,color:"dark"===r.palette.mode?i.color:"text.primary",fontWeight:"bold",border:`1px solid ${i.color}80`}})}),M.jsx(et,{sx:{color:"text.primary",fontWeight:500},children:e.mental_state})]},t)})})]})})]})})]})]}),M.jsxs(Se,{ariaLabel:"Quick Actions",sx:{position:"fixed",bottom:24,right:24},icon:M.jsx(ze,{}),direction:"up",children:[M.jsx(Te,{icon:M.jsx(re,{}),tooltipTitle:"Clear All",onClick:()=>{w(""),p(null),u([]),R()}}),M.jsx(Te,{icon:M.jsx(Q,{}),tooltipTitle:"Random Template",onClick:()=>{const e=jt[Math.floor(Math.random()*jt.length)];W(e.text)}}),M.jsx(Te,{icon:M.jsx(U,{}),tooltipTitle:"Toggle Real-time",onClick:()=>m(!c)})]})]})};export{kt as ChatAnalysis};
