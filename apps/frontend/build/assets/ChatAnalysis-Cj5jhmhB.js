var e,t,r,s,a,o,i,n,l=e=>{throw TypeError(e)},c=(e,t,r)=>t.has(e)||l("Cannot "+r),d=(e,t,r)=>(c(e,t,"read from private field"),r?r.call(e):t.get(e)),m=(e,t,r)=>t.has(e)?l("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),h=(e,t,r,s)=>(c(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),p=(e,t,r)=>(c(e,t,"access private method"),r);import{ae as u,af as x,ag as g,ah as f,ai as y,aj as v,r as b,ak as j,al as S,p as w,q as C,s as k,t as _,v as I,j as T,w as z,x as M,y as R,J as O,am as A,an as W,ao as $,ap as N,aq as F,z as P,B as D,l as H,ar as E,T as L,Q as U,C as B,a2 as q,E as G,a3 as K,D as Y,g as J,I as V,A as Q,G as X,a1 as Z,o as ee,a as te,as as re,a7 as se,a0 as ae,P as oe,n as ie,f as ne,at as le}from"./index-Cu1Lb5wm.js";import{P as ce,C as de,A as me,p as he,a as pe,b as ue,L as xe,c as ge,d as fe,e as ye,f as ve,i as be}from"./index-C8e1yo6j.js";import{u as je,E as Se,G as we,a as Ce,g as ke,S as _e,b as Ie,c as Te}from"./useAnalysisProgress-b6HtDM4F.js";import{T as ze,a as Me}from"./Tabs-CKCUqr9g.js";import{T as Re}from"./Tooltip-B6ktqcHM.js";import{L as Oe}from"./LinearProgress-H4j6QmzZ.js";import{C as Ae}from"./Collapse-DOWn6ttS.js";import{B as We}from"./Badge-D-Xm5ptJ.js";import{C as $e}from"./CardContent-CM-AlMCa.js";import{G as Ne}from"./Grid-DWJmqObS.js";import{T as Fe}from"./TextField-nZ9cWrjP.js";import"./Zoom-nMLUDPl8.js";import"./useControlled-DBWomjFB.js";import"./Card-DfkK2QiN.js";import"./FormControl-6_QTQo-v.js";var Pe=(n=class extends u{constructor(i,n){super(),m(this,a),m(this,e),m(this,t),m(this,r),m(this,s),h(this,e,i),this.setOptions(n),this.bindMethods(),p(this,a,o).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const a=this.options;this.options=d(this,e).defaultMutationOptions(t),x(this.options,a)||d(this,e).getMutationCache().notify({type:"observerOptionsUpdated",mutation:d(this,r),observer:this}),(null==a?void 0:a.mutationKey)&&this.options.mutationKey&&g(a.mutationKey)!==g(this.options.mutationKey)?this.reset():"pending"===(null==(s=d(this,r))?void 0:s.state.status)&&d(this,r).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||null==(e=d(this,r))||e.removeObserver(this)}onMutationUpdate(e){p(this,a,o).call(this),p(this,a,i).call(this,e)}getCurrentResult(){return d(this,t)}reset(){var e;null==(e=d(this,r))||e.removeObserver(this),h(this,r,void 0),p(this,a,o).call(this),p(this,a,i).call(this)}mutate(t,a){var o;return h(this,s,a),null==(o=d(this,r))||o.removeObserver(this),h(this,r,d(this,e).getMutationCache().build(d(this,e),this.options)),d(this,r).addObserver(this),d(this,r).execute(t)}},e=new WeakMap,t=new WeakMap,r=new WeakMap,s=new WeakMap,a=new WeakSet,o=function(){var e;const s=(null==(e=d(this,r))?void 0:e.state)??f();h(this,t,{...s,isPending:"pending"===s.status,isSuccess:"success"===s.status,isError:"error"===s.status,isIdle:"idle"===s.status,mutate:this.mutate,reset:this.reset})},i=function(e){y.batch(()=>{var r,a,o,i,n,l,c,m;if(d(this,s)&&this.hasListeners()){const h=d(this,t).variables,p=d(this,t).context;"success"===(null==e?void 0:e.type)?(null==(a=(r=d(this,s)).onSuccess)||a.call(r,e.data,h,p),null==(i=(o=d(this,s)).onSettled)||i.call(o,e.data,null,h,p)):"error"===(null==e?void 0:e.type)&&(null==(l=(n=d(this,s)).onError)||l.call(n,e.error,h,p),null==(m=(c=d(this,s)).onSettled)||m.call(c,void 0,e.error,h,p))}this.listeners.forEach(e=>{e(d(this,t))})})},n);const De=b.createContext();function He(e){return w("MuiTable",e)}C("MuiTable",["root","stickyHeader"]);const Ee=["className","component","padding","size","stickyHeader"],Le=z("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>I({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":I({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),Ue="table",Be=b.forwardRef(function(e,t){const r=k({props:e,name:"MuiTable"}),{className:s,component:a=Ue,padding:o="normal",size:i="medium",stickyHeader:n=!1}=r,l=_(r,Ee),c=I({},r,{component:a,padding:o,size:i,stickyHeader:n}),d=(e=>{const{classes:t,stickyHeader:r}=e;return R({root:["root",r&&"stickyHeader"]},He,t)})(c),m=b.useMemo(()=>({padding:o,size:i,stickyHeader:n}),[o,i,n]);return T.jsx(De.Provider,{value:m,children:T.jsx(Le,I({as:a,role:a===Ue?null:"table",ref:t,className:M(d.root,s),ownerState:c},l))})}),qe=b.createContext();function Ge(e){return w("MuiTableBody",e)}C("MuiTableBody",["root"]);const Ke=["className","component"],Ye=z("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),Je={variant:"body"},Ve="tbody",Qe=b.forwardRef(function(e,t){const r=k({props:e,name:"MuiTableBody"}),{className:s,component:a=Ve}=r,o=_(r,Ke),i=I({},r,{component:a}),n=(e=>{const{classes:t}=e;return R({root:["root"]},Ge,t)})(i);return T.jsx(qe.Provider,{value:Je,children:T.jsx(Ye,I({className:M(n.root,s),as:a,ref:t,role:a===Ve?null:"rowgroup",ownerState:i},o))})});function Xe(e){return w("MuiTableCell",e)}const Ze=C("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),et=["align","className","component","padding","scope","size","sortDirection","variant"],tt=z("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`size${O(r.size)}`],"normal"!==r.padding&&t[`padding${O(r.padding)}`],"inherit"!==r.align&&t[`align${O(r.align)}`],r.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>I({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid\n    ${"light"===e.palette.mode?A($(e.palette.divider,1),.88):W($(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},"head"===t.variant&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},"body"===t.variant&&{color:(e.vars||e).palette.text.primary},"footer"===t.variant&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},"small"===t.size&&{padding:"6px 16px",[`&.${Ze.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===t.padding&&{width:48,padding:"0 0 0 4px"},"none"===t.padding&&{padding:0},"left"===t.align&&{textAlign:"left"},"center"===t.align&&{textAlign:"center"},"right"===t.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===t.align&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),rt=b.forwardRef(function(e,t){const r=k({props:e,name:"MuiTableCell"}),{align:s="inherit",className:a,component:o,padding:i,scope:n,size:l,sortDirection:c,variant:d}=r,m=_(r,et),h=b.useContext(De),p=b.useContext(qe),u=p&&"head"===p.variant;let x;x=o||(u?"th":"td");let g=n;"td"===x?g=void 0:!g&&u&&(g="col");const f=d||p&&p.variant,y=I({},r,{align:s,component:x,padding:i||(h&&h.padding?h.padding:"normal"),size:l||(h&&h.size?h.size:"medium"),sortDirection:c,stickyHeader:"head"===f&&h&&h.stickyHeader,variant:f}),v=(e=>{const{classes:t,variant:r,align:s,padding:a,size:o,stickyHeader:i}=e,n={root:["root",r,i&&"stickyHeader","inherit"!==s&&`align${O(s)}`,"normal"!==a&&`padding${O(a)}`,`size${O(o)}`]};return R(n,Xe,t)})(y);let j=null;return c&&(j="asc"===c?"ascending":"descending"),T.jsx(tt,I({as:x,ref:t,className:M(v.root,a),"aria-sort":j,scope:g,ownerState:y},m))});function st(e){return w("MuiTableContainer",e)}C("MuiTableContainer",["root"]);const at=["className","component"],ot=z("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),it=b.forwardRef(function(e,t){const r=k({props:e,name:"MuiTableContainer"}),{className:s,component:a="div"}=r,o=_(r,at),i=I({},r,{component:a}),n=(e=>{const{classes:t}=e;return R({root:["root"]},st,t)})(i);return T.jsx(ot,I({ref:t,as:a,className:M(n.root,s),ownerState:i},o))});function nt(e){return w("MuiTableHead",e)}C("MuiTableHead",["root"]);const lt=["className","component"],ct=z("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),dt={variant:"head"},mt="thead",ht=b.forwardRef(function(e,t){const r=k({props:e,name:"MuiTableHead"}),{className:s,component:a=mt}=r,o=_(r,lt),i=I({},r,{component:a}),n=(e=>{const{classes:t}=e;return R({root:["root"]},nt,t)})(i);return T.jsx(qe.Provider,{value:dt,children:T.jsx(ct,I({as:a,className:M(n.root,s),ref:t,role:a===mt?null:"rowgroup",ownerState:i},o))})});function pt(e){return w("MuiTableRow",e)}const ut=C("MuiTableRow",["root","selected","hover","head","footer"]),xt=["className","component","hover","selected"],gt=z("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.head&&t.head,r.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${ut.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${ut.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:$(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:$(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),ft="tr",yt=b.forwardRef(function(e,t){const r=k({props:e,name:"MuiTableRow"}),{className:s,component:a=ft,hover:o=!1,selected:i=!1}=r,n=_(r,xt),l=b.useContext(qe),c=I({},r,{component:a,hover:o,selected:i,head:l&&"head"===l.variant,footer:l&&"footer"===l.variant}),d=(e=>{const{classes:t,selected:r,hover:s,head:a,footer:o}=e;return R({root:["root",r&&"selected",s&&"hover",a&&"head",o&&"footer"]},pt,t)})(c);return T.jsx(gt,I({as:a,ref:t,className:M(d.root,s),role:a===ft?null:"row",ownerState:c},n))});var vt=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function bt(e,t){return e===t||!(!vt(e)||!vt(t))}function jt(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!bt(e[r],t[r]))return!1;return!0}function St(e,t){var r;void 0===t&&(t=jt);var s,a=[],o=!1;return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return o&&r===this&&t(i,a)||(s=e.apply(this,i),o=!0,r=this,a=i),s}}var wt="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function Ct(e){cancelAnimationFrame(e.id)}var kt=-1;function _t(e){if(void 0===e&&(e=!1),-1===kt||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),kt=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return kt}var It=null;function Tt(e){if(void 0===e&&(e=!1),null===It||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var s=document.createElement("div"),a=s.style;return a.width="100px",a.height="100px",t.appendChild(s),document.body.appendChild(t),t.scrollLeft>0?It="positive-descending":(t.scrollLeft=1,It=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),It}return It}var zt=function(e,t){return e};function Mt(e){var t,r=e.getItemOffset,s=e.getEstimatedTotalSize,a=e.getItemSize,o=e.getOffsetForIndexAndAlignment,i=e.getStartIndexForOffset,n=e.getStopIndexForStartIndex,l=e.initInstanceProps,c=e.shouldResetStyleCacheOnItemSizeChange,d=e.validateProps;return(t=function(e){function t(t){var s;return(s=e.call(this,t)||this)._instanceProps=l(s.props,F(s)),s._outerRef=void 0,s._resetIsScrollingTimeoutId=null,s.state={instance:F(s),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof s.props.initialScrollOffset?s.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},s._callOnItemsRendered=void 0,s._callOnItemsRendered=St(function(e,t,r,a){return s.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:r,visibleStopIndex:a})}),s._callOnScroll=void 0,s._callOnScroll=St(function(e,t,r){return s.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:r})}),s._getItemStyle=void 0,s._getItemStyle=function(e){var t,o=s.props,i=o.direction,n=o.itemSize,l=o.layout,d=s._getItemStyleCache(c&&n,c&&l,c&&i);if(d.hasOwnProperty(e))t=d[e];else{var m=r(s.props,e,s._instanceProps),h=a(s.props,e,s._instanceProps),p="horizontal"===i||"horizontal"===l,u="rtl"===i,x=p?m:0;d[e]=t={position:"absolute",left:u?void 0:x,right:u?x:void 0,top:p?0:m,height:p?"100%":h,width:p?h:"100%"}}return t},s._getItemStyleCache=void 0,s._getItemStyleCache=St(function(e,t,r){return{}}),s._onScrollHorizontal=function(e){var t=e.currentTarget,r=t.clientWidth,a=t.scrollLeft,o=t.scrollWidth;s.setState(function(e){if(e.scrollOffset===a)return null;var t=s.props.direction,i=a;if("rtl"===t)switch(Tt()){case"negative":i=-a;break;case"positive-descending":i=o-r-a}return i=Math.max(0,Math.min(i,o-r)),{isScrolling:!0,scrollDirection:e.scrollOffset<i?"forward":"backward",scrollOffset:i,scrollUpdateWasRequested:!1}},s._resetIsScrollingDebounced)},s._onScrollVertical=function(e){var t=e.currentTarget,r=t.clientHeight,a=t.scrollHeight,o=t.scrollTop;s.setState(function(e){if(e.scrollOffset===o)return null;var t=Math.max(0,Math.min(o,a-r));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}},s._resetIsScrollingDebounced)},s._outerRefSetter=function(e){var t=s.props.outerRef;s._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},s._resetIsScrollingDebounced=function(){var e,t,r,a;null!==s._resetIsScrollingTimeoutId&&Ct(s._resetIsScrollingTimeoutId),s._resetIsScrollingTimeoutId=(e=s._resetIsScrolling,t=150,r=wt(),a={id:requestAnimationFrame(function s(){wt()-r>=t?e.call(null):a.id=requestAnimationFrame(s)})})},s._resetIsScrolling=function(){s._resetIsScrollingTimeoutId=null,s.setState({isScrolling:!1},function(){s._getItemStyleCache(-1,null)})},s}N(t,e),t.getDerivedStateFromProps=function(e,t){return Rt(e,t),d(e),null};var m=t.prototype;return m.scrollTo=function(e){e=Math.max(0,e),this.setState(function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},m.scrollToItem=function(e,t){void 0===t&&(t="auto");var r=this.props,s=r.itemCount,a=r.layout,i=this.state.scrollOffset;e=Math.max(0,Math.min(e,s-1));var n=0;if(this._outerRef){var l=this._outerRef;n="vertical"===a?l.scrollWidth>l.clientWidth?_t():0:l.scrollHeight>l.clientHeight?_t():0}this.scrollTo(o(this.props,e,t,i,this._instanceProps,n))},m.componentDidMount=function(){var e=this.props,t=e.direction,r=e.initialScrollOffset,s=e.layout;if("number"==typeof r&&null!=this._outerRef){var a=this._outerRef;"horizontal"===t||"horizontal"===s?a.scrollLeft=r:a.scrollTop=r}this._callPropsCallbacks()},m.componentDidUpdate=function(){var e=this.props,t=e.direction,r=e.layout,s=this.state,a=s.scrollOffset;if(s.scrollUpdateWasRequested&&null!=this._outerRef){var o=this._outerRef;if("horizontal"===t||"horizontal"===r)if("rtl"===t)switch(Tt()){case"negative":o.scrollLeft=-a;break;case"positive-ascending":o.scrollLeft=a;break;default:var i=o.clientWidth,n=o.scrollWidth;o.scrollLeft=n-i-a}else o.scrollLeft=a;else o.scrollTop=a}this._callPropsCallbacks()},m.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&Ct(this._resetIsScrollingTimeoutId)},m.render=function(){var e=this.props,t=e.children,r=e.className,a=e.direction,o=e.height,i=e.innerRef,n=e.innerElementType,l=e.innerTagName,c=e.itemCount,d=e.itemData,m=e.itemKey,h=void 0===m?zt:m,p=e.layout,u=e.outerElementType,x=e.outerTagName,g=e.style,f=e.useIsScrolling,y=e.width,v=this.state.isScrolling,j="horizontal"===a||"horizontal"===p,S=j?this._onScrollHorizontal:this._onScrollVertical,w=this._getRangeToRender(),C=w[0],k=w[1],_=[];if(c>0)for(var T=C;T<=k;T++)_.push(b.createElement(t,{data:d,key:h(T,d),index:T,isScrolling:f?v:void 0,style:this._getItemStyle(T)}));var z=s(this.props,this._instanceProps);return b.createElement(u||x||"div",{className:r,onScroll:S,ref:this._outerRefSetter,style:I({position:"relative",height:o,width:y,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:a},g)},b.createElement(n||l||"div",{children:_,ref:i,style:{height:j?"100%":z,pointerEvents:v?"none":void 0,width:j?z:"100%"}}))},m._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],r=e[1],s=e[2],a=e[3];this._callOnItemsRendered(t,r,s,a)}if("function"==typeof this.props.onScroll){var o=this.state,i=o.scrollDirection,n=o.scrollOffset,l=o.scrollUpdateWasRequested;this._callOnScroll(i,n,l)}},m._getRangeToRender=function(){var e=this.props,t=e.itemCount,r=e.overscanCount,s=this.state,a=s.isScrolling,o=s.scrollDirection,l=s.scrollOffset;if(0===t)return[0,0,0,0];var c=i(this.props,l,this._instanceProps),d=n(this.props,c,l,this._instanceProps),m=a&&"backward"!==o?1:Math.max(1,r),h=a&&"forward"!==o?1:Math.max(1,r);return[Math.max(0,c-m),Math.max(0,Math.min(t-1,d+h)),c,d]},t}(b.PureComponent)).defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var Rt=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},Ot=Mt({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,r,s,a,o){var i=e.direction,n=e.height,l=e.itemCount,c=e.itemSize,d=e.layout,m=e.width,h="horizontal"===i||"horizontal"===d?m:n,p=Math.max(0,l*c-h),u=Math.min(p,t*c),x=Math.max(0,t*c-h+c+o);switch("smart"===r&&(r=s>=x-h&&s<=u+h?"auto":"center"),r){case"start":return u;case"end":return x;case"center":var g=Math.round(x+(u-x)/2);return g<Math.ceil(h/2)?0:g>p+Math.floor(h/2)?p:g;default:return s>=x&&s<=u?s:s<x?x:u}},getStartIndexForOffset:function(e,t){var r=e.itemCount,s=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(t/s)))},getStopIndexForStartIndex:function(e,t,r){var s=e.direction,a=e.height,o=e.itemCount,i=e.itemSize,n=e.layout,l=e.width,c=t*i,d="horizontal"===s||"horizontal"===n?l:a,m=Math.ceil((d+r-c)/i);return Math.max(0,Math.min(o-1,t+m-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});de.register(me,he,pe,ue);const At=({data:e})=>{const t=P(),r={labels:e.map(e=>e.name),datasets:[{data:e.map(e=>e.value),backgroundColor:e.map(e=>e.color),borderColor:t.palette.background.paper,borderWidth:2}]},s={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:t.palette.text.primary,boxWidth:20,padding:20}},title:{display:!0,text:"Mental State Distribution",color:t.palette.text.primary,font:{size:16}},tooltip:{callbacks:{label:function(e){let t=e.dataset.label||"";return t&&(t+=": "),null!==e.parsed&&(t+=`${e.label}: ${e.raw}%`),t}}}}};return T.jsx(D,{sx:{height:350,width:"100%"},children:T.jsx(ce,{data:r,options:s})})};de.register(ge,fe,ye,ve,ue,he,pe,be);const Wt=({data:e})=>{const t=P(),r={labels:e.map(e=>new Date(e.timestamp).toLocaleTimeString()),datasets:[{label:"Sentiment Trend",data:e.map(e=>e.sentiment),fill:!0,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",tension:.4}]},s={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Sentiment Over Time",color:t.palette.text.primary,font:{size:16}},tooltip:{callbacks:{label:function(t){return`Sentiment: ${e[t.dataIndex].sentiment.toFixed(2)}`},afterLabel:function(t){const r=e[t.dataIndex];return r.text?`Text: "${r.text}"`:""}}}},scales:{y:{min:-1,max:1,ticks:{color:t.palette.text.secondary},grid:{color:t.palette.divider}},x:{ticks:{color:t.palette.text.secondary},grid:{color:t.palette.divider}}}};return T.jsx(D,{sx:{height:350,width:"100%"},children:T.jsx(xe,{data:r,options:s})})},$t=[{text:"I'm feeling great today! 😊",category:"positive"},{text:"This is really frustrating me 😤",category:"negative"},{text:"I'm not sure how I feel about this...",category:"neutral"},{text:"I'm so excited about the new project! 🎉",category:"positive"},{text:"I'm stressed about the deadline",category:"negative"},{text:"Working from home has been challenging",category:"neutral"},{text:"The team meeting went really well today",category:"positive"},{text:"I feel overwhelmed with my workload",category:"negative"}],Nt=()=>{const{showSuccess:e,showError:t}=H(),r=function(e){const t=v(),[r]=b.useState(()=>new Pe(t,e));b.useEffect(()=>{r.setOptions(e)},[r,e]);const s=b.useSyncExternalStore(b.useCallback(e=>r.subscribe(y.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=b.useCallback((e,t)=>{r.mutate(e,t).catch(j)},[r]);if(s.error&&S(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}({mutationFn:e=>E(e),onSuccess:()=>{e("File analyzed successfully!")},onError:e=>{t(e.message||"Failed to analyze file.")}});return{analyzeFile:r.mutate,data:r.data,isLoading:r.isPending,error:r.error,clearData:r.reset}},Ft=z(Fe)(({theme:e})=>({"& .MuiOutlinedInput-root":{borderRadius:"20px",transition:"all 0.3s ease",background:e.palette.background.paper,"&:hover":{transform:"translateY(-2px)",boxShadow:e.shadows[4]},"&.Mui-focused":{transform:"translateY(-4px)",boxShadow:e.shadows[8],"& fieldset":{borderColor:e.palette.primary.main,borderWidth:"2px"}}}})),Pt=()=>{var e,t,r,s;const a=P(),[o,i]=b.useState("simple"),[n,l]=b.useState(!1),c=b.useRef(null),[d,m]=b.useState(!1),[h,p]=b.useState(null),[u,x]=b.useState([]),[g,f]=b.useState(null),{text:y,charCount:v,wordCount:j,handleTextChange:S,setText:w}=(()=>{const[e,t]=b.useState(""),[r,s]=b.useState(0),[a,o]=b.useState(0);return{text:e,charCount:r,wordCount:a,handleTextChange:b.useCallback(e=>{const r=e.target.value;t(r),s(r.length),o(r.trim().split(/\s+/).filter(e=>e.length>0).length)},[]),clearText:b.useCallback(()=>{t(""),s(0),o(0)},[]),setText:t}})(),{data:C,isLoading:k,error:_,analyzeFile:I,clearData:z}=Nt(),{progress:M,isLoading:R,startProgress:O,completeProgress:A}=je(),{showSuccess:W}=H(),$=e=>{w(e),l(!1)},N=b.useCallback((e,t)=>{i(t),p(null),z(),f(null)},[z]);return T.jsxs(D,{sx:{maxWidth:1200,mx:"auto",p:3},children:[T.jsxs(D,{sx:{textAlign:"center",mb:4,opacity:0,animation:"slideInDown 0.8s ease-out forwards","@keyframes slideInDown":{"0%":{opacity:0,transform:"translateY(-30px)"},"100%":{opacity:1,transform:"translateY(0)"}}},children:[T.jsx(L,{variant:"h3",component:"h1",sx:{fontWeight:700,mb:2,background:`linear-gradient(45deg, ${a.palette.primary.main}, ${a.palette.secondary.main})`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"💬 Smart Chat Analysis"}),T.jsx(L,{variant:"h6",color:"text.secondary",sx:{mb:3},children:"Discover emotions, sentiment, and mental states in your conversations"}),T.jsxs(U,{direction:"row",spacing:2,justifyContent:"center",sx:{mb:3},children:[T.jsx(B,{icon:T.jsx(q,{}),label:`${u.length} Analyses`,color:"primary",variant:"outlined"}),T.jsx(B,{icon:T.jsx(G,{}),label:"Real-time AI",color:"secondary",variant:"outlined"}),T.jsx(B,{icon:T.jsx(K,{}),label:"Enhanced UX",color:"success",variant:"outlined"})]})]}),T.jsx(Y,{sx:{mb:3},children:T.jsxs(ze,{value:o,onChange:N,variant:"fullWidth",children:[T.jsx(Me,{label:"Single Message",value:"simple",icon:T.jsx(J,{}),iconPosition:"start"}),T.jsx(Me,{label:"Batch Input",value:"batch",icon:T.jsx(q,{}),iconPosition:"start"})]})}),"simple"===o&&T.jsxs(Y,{sx:{p:4,mb:3,borderRadius:"20px",boxShadow:4},children:[T.jsxs(L,{variant:"h5",sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[T.jsx(J,{}),"Single Message Analysis"]}),T.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!y.trim())return;const t=O();try{const e=await le({text:y.trim()});p(e),x(t=>[...t.slice(-4),e]),W("Analysis successful!"),null==(r=c.current)||r.scrollIntoView({behavior:"smooth"})}catch(s){const e={error:s.message,primary_emotion:"",sentiment_score:0,mental_state:""};p(e)}finally{A(t)}var r},children:[T.jsxs(D,{sx:{mb:4},children:[T.jsx(Ft,{fullWidth:!0,multiline:!0,rows:4,label:"Enter your message for analysis",placeholder:"Type your message here... 💭",value:y,onChange:S,variant:"outlined",sx:{mb:2},InputProps:{endAdornment:T.jsx(D,{sx:{display:"flex",alignItems:"center",gap:1},children:T.jsx(Re,{title:"Quick Templates",children:T.jsx(V,{onClick:()=>l(!n),children:T.jsx(Q,{})})})})}}),T.jsxs(U,{direction:"row",spacing:2,sx:{mb:2},children:[T.jsx(B,{label:`${v} characters`,size:"small",color:v>280?"warning":"default"}),T.jsx(B,{label:`${j} words`,size:"small",color:"primary"}),T.jsx(B,{label:d?"Real-time ON":"Real-time OFF",size:"small",color:d?"success":"default",onClick:()=>m(!d),sx:{cursor:"pointer"}})]}),M>0&&T.jsx(X,{in:!0,children:T.jsxs(D,{sx:{mb:2},children:[T.jsx(Oe,{variant:"determinate",value:M,sx:{height:8,borderRadius:4,"& .MuiLinearProgress-bar":{borderRadius:4,background:`linear-gradient(45deg, ${a.palette.primary.main}, ${a.palette.secondary.main})`}}}),T.jsxs(L,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:["Analyzing... ",M.toFixed(0),"%"]})]})}),T.jsx(Ae,{in:n,children:T.jsxs(Se,{interactive:!1,sx:{p:2,mb:2,bgcolor:"background.default"},children:[T.jsx(L,{variant:"subtitle2",sx:{mb:2,fontWeight:"bold"},children:"💡 Quick Message Templates"}),T.jsx(U,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:$t.map((e,t)=>T.jsx(B,{label:e.text,onClick:()=>$(e.text),color:"positive"===e.category?"success":"negative"===e.category?"error":"default",variant:"outlined",sx:{mb:1,cursor:"pointer","&:hover":{transform:"scale(1.05)",boxShadow:2}}},t))})]})})]}),T.jsx(D,{sx:{textAlign:"center",mb:3},children:T.jsx(we,{type:"submit",loading:R,loadingText:"Analyzing Magic...",disabled:!y.trim(),size:"large",startIcon:T.jsx(Z,{}),children:"Analyze Message ✨"})})]}),h&&(e=>{if(e.error)return T.jsx(X,{in:!0,timeout:500,children:T.jsxs(ee,{severity:"error",sx:{borderRadius:"15px",mb:2},children:[T.jsx(L,{variant:"h6",children:"Analysis Failed"}),T.jsx(L,{children:e.error})]})});const t=ke(e.primary_emotion,"dark"===a.palette.mode),r=(e.sentiment_score+1)/2*100;return T.jsx(X,{in:!0,timeout:800,children:T.jsxs(Ne,{container:!0,spacing:3,sx:{mt:2},children:[T.jsx(Ne,{item:!0,xs:12,md:4,children:T.jsx(Se,{children:T.jsxs($e,{sx:{textAlign:"center",p:3},children:[T.jsx(ne,{sx:{width:80,height:80,mx:"auto",mb:2,fontSize:"2rem",bgcolor:t.color},children:t.emoji}),T.jsx(L,{variant:"h5",sx:{fontWeight:"bold",mb:1},children:e.primary_emotion.charAt(0).toUpperCase()+e.primary_emotion.slice(1)}),T.jsx(L,{variant:"body2",color:"text.secondary",children:t.description}),T.jsx(B,{label:`${(100*(e.emotion_score||0)).toFixed(1)}% confidence`,color:"primary",sx:{mt:1}})]})})}),T.jsx(Ne,{item:!0,xs:12,md:4,children:T.jsx(Se,{children:T.jsxs($e,{sx:{textAlign:"center",p:3},children:[T.jsxs(D,{sx:{position:"relative",display:"inline-flex",mb:2},children:[T.jsx(ae,{variant:"determinate",value:r,size:80,thickness:6,sx:{color:r>60?"#4CAF50":r>40?"#FF9800":"#F44336","& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),T.jsx(D,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:T.jsxs(L,{variant:"h6",component:"div",color:"text.secondary",children:[r.toFixed(0),"%"]})})]}),T.jsx(L,{variant:"h6",sx:{mb:1},children:"Sentiment Score"}),T.jsx(L,{variant:"body2",color:"text.secondary",children:r>60?"Very Positive":r>40?"Neutral":"Negative"})]})})}),T.jsx(Ne,{item:!0,xs:12,md:4,children:T.jsx(Se,{children:T.jsxs($e,{sx:{textAlign:"center",p:3},children:[T.jsx(ne,{sx:{width:80,height:80,mx:"auto",mb:2,background:`linear-gradient(135deg, ${a.palette.secondary.main}, ${a.palette.secondary.dark})`},children:"🧠"}),T.jsx(L,{variant:"h6",sx:{mb:1},children:"Mental State"}),T.jsx(B,{label:e.mental_state,color:"secondary",sx:{fontSize:"1rem",fontWeight:"bold",px:2,py:1}})]})})})]})})})(h),u.length>0&&T.jsx(X,{in:!0,timeout:1e3,children:T.jsxs(D,{sx:{mt:4},children:[T.jsxs(L,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:["📚 Recent Analysis History",T.jsx(We,{badgeContent:u.length,color:"primary"})]}),T.jsx(U,{spacing:2,children:u.slice(-3).reverse().map((e,t)=>T.jsx(D,{children:T.jsx(Se,{sx:{p:2,bgcolor:"background.default",border:"1px solid",borderColor:"divider",opacity:0,animation:`fadeInUp 0.6s ease-out ${.1*t}s forwards`,"@keyframes fadeInUp":{"0%":{opacity:0,transform:"translateY(20px)"},"100%":{opacity:1,transform:"translateY(0)"}}},children:T.jsxs(U,{direction:"row",spacing:2,alignItems:"center",children:[T.jsx(Ce,{emotion:e.primary_emotion}),T.jsxs(D,{sx:{flexGrow:1},children:[T.jsxs(L,{variant:"body2",sx:{fontWeight:"bold"},children:[e.primary_emotion," • ",e.mental_state]}),T.jsxs(L,{variant:"caption",color:"text.secondary",children:["Sentiment: ",((e.sentiment_score+1)/2*100).toFixed(0),"%"]})]}),T.jsx(B,{label:"#"+(u.length-t),size:"small",color:"primary"})]})})},"analysis-"+(u.length-t)))})]})}),T.jsx("div",{ref:c})]}),"batch"===o&&T.jsxs(Y,{sx:{p:3,maxWidth:1200,mx:"auto"},children:[T.jsxs(L,{variant:"h5",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[T.jsx(q,{}),"Batch Analysis"]}),T.jsx(L,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Upload a JSON file with pre-formatted messages for a comprehensive analysis."}),T.jsxs(D,{children:[T.jsx(L,{variant:"h6",sx:{mb:2},children:"📁 JSON File Upload"}),T.jsx(ee,{severity:"info",sx:{mb:3}}),T.jsxs(D,{sx:{mb:3},children:[T.jsx("input",{id:"batch-file-input",type:"file",accept:".json",onChange:e=>{e.target.files&&e.target.files[0]&&(f(e.target.files[0]),z())},style:{display:"none"}}),T.jsx("label",{htmlFor:"batch-file-input",children:T.jsx(te,{variant:"outlined",component:"span",startIcon:T.jsx(re,{}),sx:{mb:2},children:"Choose JSON File"})}),g&&T.jsxs(D,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[T.jsxs(L,{variant:"body2",children:[g.name," (",(g.size/1024).toFixed(1)," KB)"]}),T.jsx(Re,{title:"Remove file",children:T.jsx(V,{size:"small",onClick:()=>{f(null),z()},children:T.jsx(se,{})})})]})]})]}),T.jsx(D,{sx:{mb:3},children:T.jsx(te,{variant:"contained",onClick:()=>{g&&I(g)},disabled:k||!g,startIcon:k?T.jsx(ae,{size:20}):T.jsx(oe,{}),size:"large",children:k?"Analyzing...":"Start Batch Analysis"})}),k&&T.jsxs(D,{sx:{textAlign:"center",py:4},children:[T.jsx(ae,{size:60}),T.jsx(L,{variant:"h6",sx:{mt:2},children:"Analyzing your messages..."})]}),_&&T.jsx(ee,{severity:"error",sx:{mt:2},children:_.message}),C&&T.jsxs(D,{sx:{mt:3},children:[T.jsx(Se,{sx:{mb:3,bgcolor:"dark"===a.palette.mode?"grey.900":"grey.50",border:`1px solid ${a.palette.divider}`},children:T.jsxs($e,{children:[T.jsxs(L,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:["📊 Analysis Summary",T.jsx(B,{label:`${C.summary.total_messages} messages`,color:"primary",size:"small"})]}),T.jsxs(Ne,{container:!0,spacing:2,children:[T.jsxs(Ne,{item:!0,xs:12,sm:6,children:[T.jsx(L,{variant:"subtitle1",sx:{fontWeight:600,mb:1,color:"text.primary"},children:"🧠 Mental State Distribution:"}),Object.entries(C.summary.mental_state_distribution||{}).map(([e,t])=>T.jsxs(L,{variant:"body2",sx:{ml:2,mb:.5,color:"text.secondary"},children:["• ",T.jsxs("strong",{style:{color:a.palette.text.primary},children:[e,":"]})," ",String(t)]},e))]}),T.jsxs(Ne,{item:!0,xs:12,sm:6,children:[T.jsxs(L,{variant:"body1",sx:{mb:1,color:"text.primary"},children:[T.jsx("strong",{children:"💭 Average Sentiment:"})," ",C.summary.average_sentiment]}),T.jsxs(L,{variant:"body1",sx:{mb:1,color:"text.primary"},children:[T.jsx("strong",{children:"😊 Most Common Emotion:"})," ",C.summary.most_common_emotion]}),C.summary.time_span&&T.jsxs(D,{children:[T.jsx(L,{variant:"body2",sx:{mb:.5,color:"text.primary"},children:T.jsx("strong",{children:"⏰ Time Span:"})}),T.jsxs(L,{variant:"body2",sx:{ml:2,fontSize:"0.8rem",color:"text.secondary"},children:["From: ",C.summary.time_span.start]}),T.jsxs(L,{variant:"body2",sx:{ml:2,fontSize:"0.8rem",color:"text.secondary"},children:["To: ",C.summary.time_span.end]})]})]})]}),C.success&&T.jsx(ee,{severity:"success",sx:{mt:2,borderRadius:"12px"},children:C.message})]})}),((null==(e=C.mental_states_data)?void 0:e.length)>0||(null==(t=C.sentiment_trend_data)?void 0:t.length)>0)&&T.jsx(Se,{sx:{mb:3,bgcolor:"background.paper",border:`1px solid ${a.palette.divider}`},children:T.jsxs($e,{children:[T.jsx(L,{variant:"h6",sx:{mb:2,color:"text.primary"},children:"📈 Interactive Visualizations (React Charts)"}),T.jsxs(Ne,{container:!0,spacing:3,children:[(null==(r=C.mental_states_data)?void 0:r.length)>0&&T.jsx(Ne,{item:!0,xs:12,lg:6,children:T.jsx(At,{data:C.mental_states_data.filter(e=>{const t=e.name&&"number"==typeof e.value&&!isNaN(e.value)&&e.value>0;return t||console.warn("Invalid mental states data item:",e),t})})}),(null==(s=C.sentiment_trend_data)?void 0:s.length)>0&&T.jsx(Ne,{item:!0,xs:12,lg:6,children:T.jsx(Wt,{data:C.sentiment_trend_data.filter(e=>{const t=e.timestamp&&"number"==typeof e.sentiment&&!isNaN(e.sentiment);return t||console.warn("Invalid sentiment trend data item:",e),t})})})]})]})}),Array.isArray(C.analyzed_messages)&&C.analyzed_messages.length>0&&T.jsx(Se,{sx:{bgcolor:"background.paper",border:`1px solid ${a.palette.divider}`},children:T.jsxs($e,{children:[T.jsx(L,{variant:"h6",sx:{mb:2,color:"text.primary"},children:"📝 Detailed Message Analysis"}),T.jsx(it,{component:Y,sx:{maxHeight:600,bgcolor:"background.paper",border:`1px solid ${a.palette.divider}`},children:T.jsxs(Be,{stickyHeader:!0,size:"small",children:[T.jsx(ht,{children:T.jsxs(yt,{children:[T.jsx(rt,{sx:{bgcolor:"dark"===a.palette.mode?"grey.800":"grey.100",color:"text.primary",fontWeight:"bold"},children:"Timestamp"}),T.jsx(rt,{sx:{bgcolor:"dark"===a.palette.mode?"grey.800":"grey.100",color:"text.primary",fontWeight:"bold"},children:"Text"}),T.jsx(rt,{sx:{bgcolor:"dark"===a.palette.mode?"grey.800":"grey.100",color:"text.primary",fontWeight:"bold"},children:"Person ID"}),T.jsx(rt,{sx:{bgcolor:"dark"===a.palette.mode?"grey.800":"grey.100",color:"text.primary",fontWeight:"bold"},children:"Sentiment"}),T.jsx(rt,{sx:{bgcolor:"dark"===a.palette.mode?"grey.800":"grey.100",color:"text.primary",fontWeight:"bold"},children:"Emotion"}),T.jsx(rt,{sx:{bgcolor:"dark"===a.palette.mode?"grey.800":"grey.100",color:"text.primary",fontWeight:"bold"},children:"Mental State"})]})}),T.jsx(Qe,{children:T.jsx(Ot,{height:400,itemCount:C.analyzed_messages.length,itemSize:65,width:"100%",children:({index:e,style:t})=>{const r=C.analyzed_messages[e],s=r.sentiment_score??0,o=r.primary_emotion??"neutral",i=ke(o,"dark"===a.palette.mode);return T.jsxs(yt,{style:t,sx:{"&:nth-of-type(odd)":{bgcolor:"dark"===a.palette.mode?"grey.900":"grey.50"},"&:hover":{bgcolor:"dark"===a.palette.mode?"grey.700":"grey.200"},display:"flex",width:"100%"},children:[T.jsx(rt,{sx:{fontSize:"0.75rem",color:"text.secondary",flex:1},children:r.timestamp}),T.jsx(rt,{sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"text.primary",flex:2},children:r.text}),T.jsx(rt,{sx:{color:"text.primary",flex:1},children:r.person_id}),T.jsx(rt,{sx:{flex:1},children:T.jsx(B,{label:`${((s+1)/2*100).toFixed(0)}%`,size:"small",color:s>0?"success":s<0?"error":"default",sx:{fontWeight:"bold","&.MuiChip-colorDefault":{bgcolor:"dark"===a.palette.mode?"grey.700":"grey.300",color:"text.primary"}}})}),T.jsx(rt,{sx:{flex:1},children:T.jsx(B,{label:o,size:"small",sx:{bgcolor:"dark"===a.palette.mode?`${i.color}40`:i.bgColor,color:"dark"===a.palette.mode?i.color:"text.primary",fontWeight:"bold",border:`1px solid ${i.color}80`}})}),T.jsx(rt,{sx:{color:"text.primary",fontWeight:500,flex:1},children:r.mental_state})]},e)}})})]})})]})})]})]}),T.jsxs(_e,{ariaLabel:"Quick Actions",sx:{position:"fixed",bottom:24,right:24},icon:T.jsx(Te,{}),direction:"up",children:[T.jsx(Ie,{icon:T.jsx(ie,{}),tooltipTitle:"Clear All",onClick:()=>{w(""),p(null),x([]),z()}}),T.jsx(Ie,{icon:T.jsx(Q,{}),tooltipTitle:"Random Template",onClick:()=>{const e=$t[Math.floor(Math.random()*$t.length)];$(e.text)}}),T.jsx(Ie,{icon:T.jsx(G,{}),tooltipTitle:"Toggle Real-time",onClick:()=>m(!d)})]})]})};export{Pt as ChatAnalysis};
